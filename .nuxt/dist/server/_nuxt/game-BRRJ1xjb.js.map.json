{"file":"game-BRRJ1xjb.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AACO,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,wCAAoC,MAAA,CAAA,CAAA,WAAA;oBAErBC,KAAAA,OAAK,CAAnB,MAAM,QAAG;;wBAGeC,KAAAA;AAAAA,QAAAA,kKAI7B,IAAI;;;;;;;;;;;;;;;;ACiCb,UAAM,QAAQ,IAAc,EAAE;AAC9B,UAAM,eAAe,IAAI,GAAG;AAC5B,UAAM,YAAY,IAAI,aAAa,KAAK;AACxC,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,SAAS,SAAS,MAAM,UAAU,SAAS,MAAM,CAAC,SAAS,KAAK;AAkGtE,UAAM,KAAK,SAAS,MAAM,OAAO,KAAK,MAAM,UAAU,QAAQ,EAAE,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC;AACnF,UAAM,KAAK,SAAS,MAAM,OAAO,UAAU,QAAQ,EAAE,EAAE,SAAS,GAAG,GAAG,CAAC;;;AAlJhE,YAAA,OAAAH,eAAAC,WAAA,EAAA,OAAM,6BAAyB,MAAA,CAAA,CAAA,sIAAA;;QAGpB,IAAG;AAAA,QAAI,OAAM;AAAA,MAAA;yBAAvB,CAA+E,GAAAG,QAAAC,UAAA,aAAA;;;;;8BAAtB,aAAW;AAAA,YAAA;AAAA;;;;0dASTC,MAAA,MAAA,IAAM,iBAAA,YAAA,CAAA,qCACxDA,MAAA,EAAA,CAAE,oBAAOA,MAAA,EAAA,CAAE,0KAMXA,MAAA,MAAA,IAAM,YAAA,UAAA;;QAOC,OAAOA,MAAA,KAAA;AAAA,QAAQ,UAAUA,MAAA,MAAA,KAAUA,MAAA,QAAA;AAAA,MAAA;;UAGxCA,MAAA,QAAA,GAAQ;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","board","disabled","_push","_parent","_unref"],"sources":["../../../../components/BoggleBoard.vue","../../../../pages/game.vue"],"sourcesContent":["<template>\n  <div class=\"grid grid-cols-4 gap-2 select-none\">\n    <div\n      v-for=\"(cell, idx) in board\"\n      :key=\"idx\"\n      class=\"aspect-square rounded-xl bg-slate-800 border border-slate-700 grid place-items-center text-2xl sm:text-3xl font-extrabold tracking-wide\"\n      :class=\"{\n        'opacity-50': disabled\n      }\"\n    >\n      {{ cell }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ndefineProps<{ board: string[]; disabled?: boolean }>()\n</script>\n\n","<template>\n  <div class=\"min-h-screen p-4 sm:p-6\">\n    <div class=\"max-w-3xl mx-auto\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <NuxtLink to=\"/\" class=\"text-slate-300 hover:text-white\">‚Üê Nova igra</NuxtLink>\n        <h1 class=\"text-2xl font-bold\">Boggle</h1>\n        <div class=\"w-24\"></div>\n      </div>\n\n      <div class=\"bg-slate-800/70 rounded-xl p-4 sm:p-6 border border-slate-700\">\n        <div class=\"flex items-center justify-between gap-2 mb-4\">\n          <div class=\"flex items-center gap-3\">\n            <span class=\"text-slate-300\">Preostalo vreme:</span>\n            <span :class=\"['text-2xl font-extrabold tabular-nums', danger ? 'text-red-400' : 'text-white']\">\n              {{ mm }}:{{ ss }}\n            </span>\n          </div>\n\n          <div class=\"flex items-center gap-2\">\n            <button class=\"px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600\" @click=\"togglePause\">\n              {{ paused ? 'Nastavi' : 'Pauziraj' }}\n            </button>\n            <button class=\"px-3 py-2 rounded-lg bg-brand hover:bg-brand-dark\" @click=\"newGame\">Nova tabla</button>\n          </div>\n        </div>\n\n        <div class=\"grid place-items-center py-2\">\n          <BoggleBoard :board=\"board\" :disabled=\"paused || finished\" />\n        </div>\n\n        <div v-if=\"finished\" class=\"mt-4 text-center\">\n          <p class=\"text-xl font-semibold mb-3\">Vreme je isteklo!</p>\n          <button class=\"px-4 py-2 rounded-lg bg-brand hover:bg-brand-dark\" @click=\"newGame\">Igraj ponovo</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport BoggleBoard from '@/components/BoggleBoard.vue'\nimport { generateBoard } from '@/utils/letters'\n\nconst board = ref<string[]>([])\nconst totalSeconds = ref(180) // 3 minutes\nconst remaining = ref(totalSeconds.value)\nconst paused = ref(false)\nconst finished = ref(false)\nconst danger = computed(() => remaining.value <= 20 && !finished.value)\n\nlet tickHandle: number | null = null\nlet dangerInterval: number | null = null\n\nonMounted(() => {\n  newGame()\n})\n\nonBeforeUnmount(() => stopAllTimers())\n\nfunction newGame() {\n  stopAllTimers()\n  board.value = generateBoard()\n  remaining.value = totalSeconds.value\n  finished.value = false\n  paused.value = false\n  startTick()\n}\n\nfunction togglePause() {\n  if (finished.value) return\n  paused.value = !paused.value\n  if (paused.value) {\n    stopTick()\n    stopDangerSound()\n  } else {\n    startTick()\n  }\n}\n\nfunction startTick() {\n  stopTick()\n  tickHandle = window.setInterval(() => {\n    if (paused.value) return\n    if (remaining.value > 0) {\n      remaining.value -= 1\n      if (remaining.value === 20) startDangerSound()\n      if (remaining.value === 0) {\n        finished.value = true\n        stopDangerSound()\n        stopTick()\n      }\n    }\n  }, 1000)\n}\n\nfunction stopTick() {\n  if (tickHandle) {\n    clearInterval(tickHandle)\n    tickHandle = null\n  }\n}\n\nfunction stopAllTimers() {\n  stopTick()\n  stopDangerSound()\n}\n\n// WebAudio danger beep (every ~1s in last 20s)\nlet audioCtx: AudioContext | null = null\n\nfunction startDangerSound() {\n  stopDangerSound()\n  if (!audioCtx) {\n    try { audioCtx = new (window.AudioContext || (window as any).webkitAudioContext)() } catch {}\n  }\n  if (!audioCtx) return\n  // schedule repeating beeps while in danger window\n  dangerInterval = window.setInterval(() => {\n    if (!danger.value || paused.value || finished.value) return\n    beep(480, 0.12)\n  }, 1000)\n}\n\nfunction stopDangerSound() {\n  if (dangerInterval) {\n    clearInterval(dangerInterval)\n    dangerInterval = null\n  }\n}\n\nfunction beep(freq: number, duration: number) {\n  if (!audioCtx) return\n  const t0 = audioCtx.currentTime\n  const osc = audioCtx.createOscillator()\n  const gain = audioCtx.createGain()\n  osc.type = 'square'\n  osc.frequency.value = freq\n  gain.gain.setValueAtTime(0.001, t0)\n  gain.gain.exponentialRampToValueAtTime(0.2, t0 + 0.01)\n  gain.gain.exponentialRampToValueAtTime(0.001, t0 + duration)\n  osc.connect(gain)\n  gain.connect(audioCtx.destination)\n  osc.start(t0)\n  osc.stop(t0 + duration + 0.02)\n}\n\nconst mm = computed(() => String(Math.floor(remaining.value / 60)).padStart(2, '0'))\nconst ss = computed(() => String(remaining.value % 60).padStart(2, '0'))\n</script>\n\n<style scoped>\n.tabular-nums { font-variant-numeric: tabular-nums; }\n</style>\n\n"],"version":3}