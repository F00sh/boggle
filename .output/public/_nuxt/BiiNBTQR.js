import{_ as ve}from"./Dxs7FzeS.js";import{g as te,r as c,j as E,k as fe,c as v,o as f,a as e,n as K,F as M,l as Z,m as pe,p as s,t as u,q as be,s as me,v as ge,x as R,b as X,w as xe,d as he,y as we}from"#entry";import{_ as _e}from"./DlAUqK2U.js";const ye={class:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg mx-auto"},ke={class:"p-3 border-[12px] border-orange-500 rounded-2xl bg-transparent"},je=["onClick"],Ae=te({__name:"BoggleBoard",props:{board:{},disabled:{type:Boolean},blurred:{type:Boolean},selected:{}},emits:["cell-click"],setup(l,{emit:o}){const r=l,p=o,i=c([]),b=E(()=>new Set(r.selected??[]));function m(){const d=[0,90,180,270];i.value=r.board.map(()=>d[Math.floor(Math.random()*d.length)])}fe(()=>r.board,()=>m(),{immediate:!0});function g(d){r.disabled||p("cell-click",d)}return(d,A)=>(f(),v("div",ye,[e("div",ke,[e("div",{class:K(["grid grid-cols-4 gap-2 select-none transition filter",{"blur-md":d.blurred}])},[(f(!0),v(M,null,Z(d.board,(w,_)=>(f(),v("button",{key:_,type:"button",class:K(["aspect-square rounded-lg bg-white border border-slate-300 grid place-items-center text-2xl sm:text-3xl font-extrabold tracking-wide text-black focus:outline-none",[d.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow",s(b).has(_)?"ring-4 ring-emerald-500 bg-emerald-100":""]]),style:pe({transform:`rotate(${s(i)[_]??0}deg)`}),onClick:y=>g(_)},u(w),15,je))),128))],2)])]))}}),Ce=["DOM","KUCA","KUĆA","KUĆA","RIBA","MORE","PLAN","STAN","GRAD","VODA","ZORA","ZUB","ZBUN","TRAVA","STOL","STOLAC","KRUG","SUNCE","MJESEC","ZVIJEZDA","ZVEZDA","LJUBAV","NJIVA","DŽEM","DŽEPNI","DŽEP","NJEGOV","LJETO","LJESTVE","LJILJAN","JABUKA","KRUH","KRUŠKA","KRUŽNO","ŠUMA","ŠUPA","ŠEĆER","SECER","ŽIRAFA","ŽELJA","ŽELJA","ČOVJEK","COVJEK","ĆUP","DJETE","DIJETE","IGRA","IGRATI","PISMO","PISATI","KNJIGA","KNJIGE","BRDO","POLJE","PUT","PUTOVANJE","RJEKA","RIJEKA","PTICA","PTICE","HLJEB","ZUBAR","DAN","DANI","NOĆ","NOC","SNIJEG","SNEG","LED","HLADNO","TOPLO","VATRA","DIM","TLO","ZEMLJA","NEBO"];function se(l){return(l||"").trim().toUpperCase()}const Ee=new Set(Ce.map(se));function Ie(l){const o=se(l);return!o||o.length<3?!1:Ee.has(o)}const Re="https://hr.wiktionary.org/w/api.php",L=new Map;async function Ne(l){const o=(l||"").trim();if(!o)return!1;const r=o.toLowerCase();if(L.has(r))return L.get(r);const p=De([o.toLowerCase(),Te(o.toLowerCase()),o.toUpperCase()]);for(const i of p)try{const b=`${Re}?action=query&format=json&origin=*&titles=${encodeURIComponent(i)}`,m=await fetch(b);if(!m.ok)continue;const d=(await m.json())?.query?.pages;if(d&&typeof d=="object"&&Object.values(d).some(w=>w&&!("missing"in w)))return L.set(r,!0),!0}catch{}return L.set(r,!1),!1}let B=null,V=null;async function Se(l){try{const o=await fetch(l);return o.ok?await o.json():null}catch{return null}}async function Oe(){return B||V||(V=(async()=>{const l=["/croatian_words.json","/croatian_words_extended.json","/croatian_words_inflections.json"],o=await Promise.all(l.map(Se)),r=new Set;for(const p of o)if(Array.isArray(p))for(const i of p)typeof i=="string"&&r.add(i);return r.size===0?null:(B=r,B)})(),V)}function Je(l){return(l||"").trim().toUpperCase()}async function Pe(l){const o=Je(l),r=await Oe();if(r&&r.has(o)||Ie(o))return!0;try{return await Ne(o)}catch{return!1}}function Te(l){return l&&l[0].toUpperCase()+l.slice(1)}function De(l){return Array.from(new Set(l))}const Ue={class:"min-h-screen p-4 sm:p-6"},Le={class:"max-w-3xl mx-auto"},Be={class:"flex items-center justify-between mb-4"},Ve={class:"bg-slate-800/70 rounded-xl p-4 sm:p-6 border border-slate-700"},Me={class:"hidden sm:flex items-center justify-between gap-2 mb-4"},Ke={class:"flex items-center gap-3"},$e={class:"flex items-center gap-2"},ze=["disabled"],Ze={class:"sm:hidden flex items-center justify-center gap-3 mb-3"},Ge={class:"grid place-items-center py-2 relative"},We={key:0,class:"absolute inset-0 grid place-items-center"},qe={class:"text-6xl sm:text-7xl font-black text-white/90 drop-shadow-[0_2px_8px_rgba(0,0,0,0.6)]"},He={key:1,class:"absolute inset-0 grid place-items-center"},Fe={key:2,class:"absolute inset-0 grid place-items-center"},Ye={class:"mt-4 flex items-center justify-center gap-2"},Qe=["disabled"],Xe={class:"sm:hidden mt-3 flex items-center justify-center gap-2"},et=["disabled"],tt={class:"mt-4 text-center text-lg text-slate-200"},st={class:"ml-2 font-bold"},at={key:0,class:"block mt-1 text-sm text-red-400"},ot={key:0,class:"fixed inset-0 z-50"},nt={class:"absolute inset-0 grid place-items-center p-4"},lt={class:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-2xl shadow-xl overflow-hidden"},it={class:"flex items-center justify-between px-5 py-4 border-b border-slate-700"},rt={key:1,class:"fixed inset-0 z-50"},dt={class:"absolute inset-0 grid place-items-center p-4"},ut={class:"w-full max-w-xl bg-slate-900 border border-slate-700 rounded-2xl shadow-xl overflow-hidden"},ct={class:"flex items-center justify-between px-5 py-4 border-b border-slate-700"},vt={class:"text-xl font-bold"},ft={class:"p-5 max-h-[70vh] overflow-auto"},pt={key:0,class:"text-slate-300"},bt={key:1,class:"space-y-2"},mt={class:"font-semibold"},gt={class:"text-slate-300"},xt={key:2,class:"fixed inset-0 z-50"},ht={class:"absolute inset-0 grid place-items-center p-4"},wt={class:"w-full max-w-xl bg-slate-900 border border-slate-700 rounded-2xl shadow-xl overflow-hidden"},_t={class:"p-5 space-y-4 max-h-[70vh] overflow-auto"},yt={class:"flex items-center justify-between"},kt={class:"text-xl font-bold"},jt={class:"flex items-center justify-between"},At={class:"text-xl font-bold text-emerald-400"},Ct={class:"space-y-1"},Et={class:"font-semibold"},It={class:"text-slate-300"},ee=4,Rt=te({__name:"game",setup(l){const o=c([]),r=c(180),p=c(r.value),i=c(!1),b=c(!1),m=c(!1),g=c(!0),d=c(3),A=c(!1),w=c(!1),_=c(!1),y=c([]),N=c(new Set),k=c([]),C=c(""),$=E(()=>p.value<=20&&!b.value),S=c(!1);let O=null,J=null,I=null;be(()=>{P()}),me(()=>q());function P(){q(),o.value=ge(),p.value=r.value,b.value=!1,i.value=!1,y.value=[],N.value=new Set,k.value=[],_.value=!1,w.value=!1,g.value=!0,m.value=!1,d.value=3}function G(){b.value||(i.value=!i.value,i.value?(T(),D()):W())}function W(){T(),O=window.setInterval(()=>{i.value||p.value>0&&(p.value-=1,p.value===20&&oe(),p.value===0&&(b.value=!0,D(),T(),_.value=!0))},1e3)}function T(){O&&(clearInterval(O),O=null)}function q(){T(),D(),I&&(clearInterval(I),I=null)}function ae(){m.value||!g.value||(m.value=!0,g.value=!1,d.value=3,I=window.setInterval(()=>{d.value>1?d.value-=1:(clearInterval(I),I=null,m.value=!1,W())},1e3))}let j=null;function oe(){if(D(),!j)try{j=new(window.AudioContext||window.webkitAudioContext)}catch{}j&&(J=window.setInterval(()=>{!$.value||i.value||b.value||ne(480,.12)},1e3))}function D(){J&&(clearInterval(J),J=null)}function ne(a,t){if(!j)return;const x=j.currentTime,n=j.createOscillator(),h=j.createGain();n.type="square",n.frequency.value=a,h.gain.setValueAtTime(.001,x),h.gain.exponentialRampToValueAtTime(.2,x+.01),h.gain.exponentialRampToValueAtTime(.001,x+t),n.connect(h),h.connect(j.destination),n.start(x),n.stop(x+t+.02)}const H=E(()=>String(Math.floor(p.value/60)).padStart(2,"0")),F=E(()=>String(p.value%60).padStart(2,"0"));function Y(a){return{r:Math.floor(a/ee),c:a%ee}}function le(a,t){const x=Y(a),n=Y(t),h=Math.abs(x.r-n.r),Q=Math.abs(x.c-n.c);return(h!==0||Q!==0)&&h<=1&&Q<=1}function ie(a){if(C.value="",g.value||m.value||i.value||b.value)return;const t=k.value,x=t[t.length-1],n=t.indexOf(a);if(n!==-1){n===t.length-1&&t.pop();return}(t.length===0||le(x,a))&&t.push(a)}const U=E(()=>k.value.map(a=>o.value[a]).join("")),re=E(()=>U.value.length>=3&&!N.value.has(U.value));function z(a){return a>=8?11:a===7?5:a===6?4:a===5?3:a===4?2:a===3?1:0}const de=E(()=>y.value.reduce((a,t)=>a+z(t.length),0));async function ue(){const a=U.value;if(a.length<3){C.value="Riječ mora imati najmanje 3 slova.",k.value=[];return}if(N.value.has(a)){C.value="Riječ je već dodana.",k.value=[];return}S.value=!0;try{if(!await Pe(a)){C.value="Riječ nije pronađena u rječniku.",k.value=[];return}y.value.push(a),N.value.add(a),k.value=[]}catch{C.value="Greška pri provjeri riječi.",k.value=[]}finally{S.value=!1}}function ce(){_.value=!1,P()}return(a,t)=>{const x=ve;return f(),v(M,null,[e("div",Ue,[e("div",Le,[e("div",Be,[X(x,{to:"/",class:"text-slate-300 hover:text-white"},{default:xe(()=>[...t[7]||(t[7]=[he("← Nova igra",-1)])]),_:1}),t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"Boggle",-1)),t[9]||(t[9]=e("div",{class:"w-24"},null,-1))]),e("div",Ve,[e("div",Me,[e("div",Ke,[t[10]||(t[10]=e("span",{class:"text-slate-300"},"Preostalo vreme:",-1)),e("span",{class:K(["text-2xl font-extrabold tabular-nums",s($)?"text-red-400":"text-white"])},u(s(H))+":"+u(s(F)),3)]),e("div",$e,[e("button",{class:"px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50",disabled:s(m)||s(g)||s(b),onClick:G},u(s(i)?"Nastavi":"Pauziraj"),9,ze),e("button",{class:"px-3 py-2 rounded-lg bg-brand hover:bg-brand-dark",onClick:P},"Nova tabla"),e("button",{class:"px-3 py-2 rounded-lg bg-orange-600 hover:bg-orange-500",onClick:t[0]||(t[0]=n=>A.value=!0)},"Pravila")])]),e("div",Ze,[t[11]||(t[11]=e("span",{class:"text-slate-300"},"Preostalo vreme:",-1)),e("span",{class:K(["text-2xl font-extrabold tabular-nums",s($)?"text-red-400":"text-white"])},u(s(H))+":"+u(s(F)),3)]),e("div",Ge,[X(Ae,{board:s(o),disabled:s(i)||s(b)||s(m)||s(g),blurred:s(i)||s(m)||s(g),selected:s(k),onCellClick:ie},null,8,["board","disabled","blurred","selected"]),s(m)?(f(),v("div",We,[e("div",qe,u(s(d)),1)])):s(g)?(f(),v("div",He,[e("button",{class:"px-6 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white font-bold text-xl shadow-lg",onClick:ae}," Kreni ")])):s(i)&&!s(b)?(f(),v("div",Fe,[...t[12]||(t[12]=[e("div",{class:"px-4 py-2 rounded-xl bg-slate-900/70 border border-slate-700 text-white font-semibold"}," Pauzirano ",-1)])])):R("",!0)]),e("div",Ye,[e("button",{class:"px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50",disabled:!s(re)||s(S),onClick:ue},u(s(S)?"Provjera…":"Dodaj"),9,Qe),e("button",{class:"px-4 py-2 rounded-lg bg-slate-600 hover:bg-slate-500",onClick:t[1]||(t[1]=n=>w.value=!0)},"Riječi")]),e("div",Xe,[e("button",{class:"px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50",disabled:s(m)||s(g)||s(b),onClick:G},u(s(i)?"Nastavi":"Pauziraj"),9,et),e("button",{class:"px-3 py-2 rounded-lg bg-brand hover:bg-brand-dark",onClick:P},"Nova tabla"),e("button",{class:"px-3 py-2 rounded-lg bg-orange-600 hover:bg-orange-500",onClick:t[2]||(t[2]=n=>A.value=!0)},"Pravila")]),e("div",tt,[t[13]||(t[13]=e("span",{class:"opacity-75"},"Riječ:",-1)),e("span",st,u(s(U)||"—"),1),s(C)?(f(),v("span",at,u(s(C)),1)):R("",!0)])])])]),s(A)?(f(),v("div",ot,[e("div",{class:"absolute inset-0 bg-black/60",onClick:t[3]||(t[3]=n=>A.value=!1)}),e("div",nt,[e("div",lt,[e("div",it,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold"},"Pravila",-1)),e("button",{class:"px-3 py-1 rounded-md bg-slate-700 hover:bg-slate-600",onClick:t[4]||(t[4]=n=>A.value=!1)},"Zatvori")]),t[15]||(t[15]=we('<div class="p-5 space-y-4 max-h-[70vh] overflow-auto text-slate-200" data-v-715edf18><div data-v-715edf18><h3 class="font-semibold mb-2" data-v-715edf18>Pravilnik za bodovanje riječi u hrvatskom Boggleu</h3><h4 class="font-semibold" data-v-715edf18>1. Osnovna pravila</h4><ul class="list-disc pl-6 space-y-1" data-v-715edf18><li data-v-715edf18>Riječ mora biti sastavljena od najmanje 3 slova.</li><li data-v-715edf18>Riječi se tvore povezivanjem susjednih slova na ploči (okomito, vodoravno, dijagonalno).</li><li data-v-715edf18>Svako polje može se koristiti samo jednom u istoj riječi.</li><li data-v-715edf18>Dopuštena su i dvoslovna slova (LJ, NJ, DŽ) – računaju se kao jedno slovo/polje.</li><li data-v-715edf18>Imena, kratice i strane riječi se ne priznaju, osim ako su uvrštene u standardne hrvatske rječnike.</li></ul></div><div data-v-715edf18><h4 class="font-semibold" data-v-715edf18>2. Bodovanje prema duljini riječi</h4><ul class="list-disc pl-6 space-y-1" data-v-715edf18><li data-v-715edf18>3 slova – 1 bod</li><li data-v-715edf18>4 slova – 2 boda</li><li data-v-715edf18>5 slova – 3 boda</li><li data-v-715edf18>6 slova – 4 boda</li><li data-v-715edf18>7 slova – 5 bodova</li><li data-v-715edf18>8+ slova – 11 bodova</li></ul></div></div>',1))])])])):R("",!0),s(w)?(f(),v("div",rt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[5]||(t[5]=n=>w.value=!1)}),e("div",dt,[e("div",ut,[e("div",ct,[e("h2",vt,"Riječi ("+u(s(y).length)+")",1),e("button",{class:"px-3 py-1 rounded-md bg-slate-700 hover:bg-slate-600",onClick:t[6]||(t[6]=n=>w.value=!1)},"Zatvori")]),e("div",ft,[s(y).length?(f(),v("ul",bt,[(f(!0),v(M,null,Z(s(y),(n,h)=>(f(),v("li",{key:h,class:"flex items-center justify-between bg-slate-800/60 rounded-lg px-3 py-2"},[e("span",mt,u(n),1),e("span",gt,u(z(n.length))+" bod(ova)",1)]))),128))])):(f(),v("div",pt,"Nema dodanih riječi."))])])])])):R("",!0),s(_)?(f(),v("div",xt,[t[20]||(t[20]=e("div",{class:"absolute inset-0 bg-black/60"},null,-1)),e("div",ht,[e("div",wt,[t[19]||(t[19]=e("div",{class:"px-5 py-4 border-b border-slate-700"},[e("h2",{class:"text-xl font-bold"},"Vrijeme je isteklo!")],-1)),e("div",_t,[e("div",yt,[t[16]||(t[16]=e("span",{class:"text-lg"},"Ukupan broj riječi:",-1)),e("span",kt,u(s(y).length),1)]),e("div",jt,[t[17]||(t[17]=e("span",{class:"text-lg"},"Ukupni bodovi:",-1)),e("span",At,u(s(de)),1)]),e("div",null,[t[18]||(t[18]=e("h3",{class:"font-semibold mb-2"},"Popis riječi",-1)),e("ul",Ct,[(f(!0),v(M,null,Z(s(y),(n,h)=>(f(),v("li",{key:h,class:"flex items-center justify-between bg-slate-800/60 rounded-lg px-3 py-2"},[e("span",Et,u(n),1),e("span",It,u(z(n.length))+" bod(ova)",1)]))),128))])]),e("div",{class:"pt-2 text-center"},[e("button",{class:"px-5 py-2 rounded-lg bg-brand hover:bg-brand-dark font-semibold",onClick:ce},"Nova igra")])])])])])):R("",!0)],64)}}}),Jt=_e(Rt,[["__scopeId","data-v-715edf18"]]);export{Jt as default};
